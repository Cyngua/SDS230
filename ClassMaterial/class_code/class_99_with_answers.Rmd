---
title: "Class 22 bonus notes and code"
output:
  pdf_document: default
  html_document: default
---





$\\$



<!--  Please run the code in the  R chunk below once. This will install some packages and download data and images needed for these exercises.  -->

```{r message=FALSE, warning = FALSE, echo = FALSE, eval = FALSE}

# makes sure you have all the packages we have used in class installed
# SDS230::update_installed_packages()

# SDS230::download_data("moby_dick.txt")

```




```{r setup, include=FALSE}

# install.packages("latex2exp")

library(latex2exp)
library(dplyr)
library(ggplot2)

#options(scipen=999)


knitr::opts_chunk$set(echo = TRUE)

set.seed(123)

```



$\\$




## Overview

 * String manipulation



$\\$






## Part 1: String manipulation using stringr


$\\$


##### Part 1.1: Base R and stringr


```{r}

tolower("Hey")


library(stringr)


str_to_lower("STOP YELLING")




```



$\\$


##### Part 1.2: Trimming and padding a string


```{r}


str_trim("    What a mess      ")
str_to_lower("STOP YELLING")


str_pad("Let's make it messier", 50, "right")
str_pad(1:11, 3, pad = 0)   # useful for adding leading 0â€™s




```



$\\$



##### Part 1.3: Extracting a piece of a string


```{r}

str_sub("What a mess", 6, 11)

fruits <- c("apple", "pineapple", "Pear", "orange",  "peach", "banana")
str_sub(fruits, 2, 4)


```



$\\$



##### Part 1.4: Concatenating strings


```{r}

str_c("What", "a", "mess", sep = " ")

vec_words <- c("What", "a", "mess")
str_c(vec_words, collapse = " ")


```



$\\$





##### Part 1.5: Download an article



```{r}


#base_name <- "https://www.washingtonpost.com/politics/2021/11/16/white-house-says-democratic-infighting-has-hurt-biden/"
#article_name <- "infighting.html"
#full_name <- str_c(base_name) #, article_name)


base_name <- "https://www.nytimes.com/2021/11/17/us/"
article_name <- "catholic-bishops-biden-communion.html"
full_name <- str_c(base_name, article_name)


download.file(full_name, article_name)


# viewer <- getOption("viewer")
# viewer(article_name)




```



$\\$


##### Part 1.6: string length



```{r}


str_length("What a mess")
 

article_size <- file.info(article_name)$size    # size of the article in bytes

# read the whole article as a single string
the_article <- readChar(article_name, article_size)


str_length(the_article)     # size of the article as a string





```



$\\$



##### Part 1.7: string replace all


```{r}

str_replace("String", "old", "new")


article2  <- str_replace_all(the_article,  "Biden", "Sleepy Joe")

write(article2, "sleepy_article.html")

#viewer("sleepy_article.html")



```




$\\$


##### Part 1.8: String split


```{r}


str_split("String",  "split pattern")


list_of_strings <- str_split("What a mess",  " ")
vector_of_strings <- unlist(list_of_strings)
vector_of_strings[3]

article_vec <- unlist(str_split(the_article, " "))


```




$\\$


##### Part 1.9: Extracting strings


```{r}



str_extract("String", "pattern")

str_extract(fruits,  "apple")



```



$\\$


##### Part 1.10: Detecting a string


```{r}

str_detect("String", "pattern")

str_detect(fruits,  "apple")

# can you tell how many times Biden was mentioned in the article? 
sum(str_detect(article_vec, "Biden"))


```



$\\$




## Part 2: Regular expressions


We can use regular expressions to do a lot more complex string matching!





